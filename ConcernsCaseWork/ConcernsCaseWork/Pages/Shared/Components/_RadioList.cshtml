@model ConcernsCaseWork.Models.RadioButtonsUiComponent

@{
    var required = Model.Required == true ? "true" : "false";
    var errors = Model.Validate();
	var errorClass = errors?.Any() ?? false ? " govuk-form-group--error" : string.Empty;
}

<div class="govuk-form-group">
	<fieldset class="govuk-fieldset">
         <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
			<h2 class="govuk-heading-m">
				@Model.Heading
			</h2>
		</legend>

		<div class="govuk-radios @errorClass" data-module="govuk-radios">
            <partial name="Components/_ValidationErrorDetail" model="@errors" />
			@foreach (var radioItem in Model.RadioItems)
			{
				var isChecked = Model.SelectedId == radioItem.Id ? "checked" : "";
                var testId = !string.IsNullOrEmpty(radioItem.TestId) ? radioItem.TestId : radioItem.Label;
				
				<div class="govuk-radios__item">
					<input class="govuk-radios__input" 
					       id="@radioItem.Id" 
					       name="@Model.Name.@nameof(Model.SelectedId)" 
					       type="radio" 
					       data-testid="@testId" 
					       value="@radioItem.Id"
					       @isChecked />

					<label class="govuk-label govuk-radios__label" for="@radioItem.Id">
						<span>
							@radioItem.Label
						</span>
					</label>
				</div>
			}
		</div>
	</fieldset>
    <input type="hidden" name="@(Model.Name).DisplayName" value="@Model.DisplayName" />
    <input type="hidden" name="@(Model.Name).Required" value="@required" />
</div>